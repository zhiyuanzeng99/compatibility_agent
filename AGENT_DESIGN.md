# AI Safety Tool Compatibility Agent è®¾è®¡æ–¹æ¡ˆï¼ˆèåˆä¼˜åŒ–ç‰ˆï¼‰

## é¡¹ç›®åç§°ï¼šGuardAdapter

> æœ¬æ–¹æ¡ˆèåˆäº†ä¸¤ä»½ç‹¬ç«‹è®¾è®¡çš„ä¼˜ç‚¹ï¼Œå½¢æˆæ›´å®Œæ•´çš„æŠ€æœ¯æ¶æ„

---

## ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 é—®é¢˜é™ˆè¿°

å½“å‰ AI Safety å·¥å…·ç”Ÿæ€ç¢ç‰‡åŒ–ä¸¥é‡ï¼š

| å®‰å…¨å·¥å…· | ä¸»è¦ç‰¹ç‚¹ | å¸¸è§é›†æˆé—®é¢˜ |
|---------|---------|------------|
| **OpenGuardrails** | ç»Ÿä¸€æ£€æµ‹å¹³å°ï¼Œ119è¯­è¨€æ”¯æŒ | ä¼ä¸šç§æœ‰éƒ¨ç½²é…ç½®å¤æ‚ |
| **NeMo Guardrails** | NVIDIAå‡ºå“ï¼ŒGPUåŠ é€Ÿ | LangChainé›†æˆæ€§èƒ½ä¸‹é™ã€VertexAIå…¼å®¹é—®é¢˜ |
| **LlamaFirewall** | Metaå‡ºå“ï¼ŒAgentå®‰å…¨ | æ¨¡å—åŒ–é…ç½®å­¦ä¹ æ›²çº¿é™¡å³­ |
| **Guardrails AI** | RAILè§„èŒƒï¼Œå“åº”éªŒè¯ | ä¸å…¶ä»–å·¥å…·ååŒå›°éš¾ |
| **Qwen3Guard** | é˜¿é‡Œå‡ºå“ï¼Œä¸­æ–‡ä¼˜åŒ– | å›½é™…åŒ–éƒ¨ç½²é€‚é…é—®é¢˜ |

### 1.2 ç›®æ ‡

æ„å»ºä¸€ä¸ª **AI å…¼å®¹æ€§ Agent**ï¼Œå®ç°ï¼š
- âœ… 90%+ ä¸€é”®éƒ¨ç½²æˆåŠŸç‡
- âœ… è‡ªåŠ¨è¯†åˆ« AI åº”ç”¨æ¶æ„ï¼ˆæ”¯æŒç™½ç›’/é»‘ç›’åº”ç”¨ï¼‰
- âœ… æ™ºèƒ½é€‰æ‹©/é€‚é…å®‰å…¨å·¥å…·
- âœ… è‡ªåŠ¨ç”Ÿæˆå…¼å®¹æ€§é…ç½®ä»£ç 
- âœ… éƒ¨ç½²éªŒè¯ä¸é—®é¢˜è‡ªåŠ¨ä¿®å¤
- âœ… è·¨å·¥å…·ååŒæ ¡éªŒèƒ½åŠ›
- âœ… å…¨æµç¨‹å®‰å…¨ç®¡æ§ï¼ˆ4å¤§æ ¡éªŒèŠ‚ç‚¹ï¼‰

### 1.3 å…¸å‹åº”ç”¨åœºæ™¯ï¼šClaudeBot å®‰å…¨é˜²æŠ¤

**é—®é¢˜èƒŒæ™¯**ï¼š
ClaudeBotï¼ˆåŸºäº Claude çš„ AI åŠ©æ‰‹ï¼‰åœ¨å®é™…ä½¿ç”¨ä¸­æš´éœ²å‡ºä¸¥é‡å®‰å…¨é£é™©ï¼š

| é£é™©ç±»å‹ | å…·ä½“è¡¨ç° | ä¸¥é‡ç¨‹åº¦ |
|---------|---------|---------|
| **è¯¯æ“ä½œé£é™©** | è¯¯åˆ ç”¨æˆ·é‚®ä»¶ã€é”™è¯¯ä¿®æ”¹æ–‡ä»¶ | ğŸ”´ é«˜ |
| **è¶Šæƒæ“ä½œ** | æ‰§è¡Œæœªç»æˆæƒçš„æ•æ„Ÿæ“ä½œ | ğŸ”´ é«˜ |
| **ä¿¡æ¯æ³„éœ²** | åœ¨å›å¤ä¸­æš´éœ²ç”¨æˆ·éšç§ | ğŸŸ  ä¸­ |
| **Promptæ³¨å…¥** | è¢«æ¶æ„è¾“å…¥æ“æ§æ‰§è¡Œå±é™©æŒ‡ä»¤ | ğŸ”´ é«˜ |

**è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡ GuardAdapter ä¸€é”®éƒ¨ç½² OpenGuardrails

```
                    GuardAdapter è‡ªåŠ¨éƒ¨ç½²
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ClaudeBot + OpenGuardrails                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ç”¨æˆ·è¾“å…¥ â”€â”€â–¶ [è¾“å…¥æ ¡éªŒ] â”€â”€â–¶ Claude API â”€â”€â–¶ [å·¥å…·è°ƒç”¨æ ¡éªŒ]        â”‚
â”‚              â”‚              â”‚              â”‚                     â”‚
â”‚              â–¼              â”‚              â–¼                     â”‚
â”‚         æ‹¦æˆª prompt         â”‚         é˜»æ­¢å±é™©æ“ä½œ               â”‚
â”‚         injection           â”‚         (å¦‚åˆ é™¤é‚®ä»¶)               â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â””â”€â”€â–¶ [è¾“å‡ºæ ¡éªŒ] â”€â”€â–¶ è¿”å›ç»“æœ         â”‚
â”‚                                   â”‚                              â”‚
â”‚                                   â–¼                              â”‚
â”‚                              æ•æ„Ÿä¿¡æ¯è„±æ•                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¡éªŒèŠ‚ç‚¹é…ç½®:
â”œâ”€â”€ pre_prompt: jailbreakæ£€æµ‹ã€æ•æ„Ÿè¯è¿‡æ»¤
â”œâ”€â”€ pre_tool_call: å±é™©æ“ä½œæ‹¦æˆªã€äºŒæ¬¡ç¡®è®¤
â””â”€â”€ post_result: éšç§ä¿¡æ¯è„±æ•ã€å†…å®¹å®‰å…¨æ£€æŸ¥
```

**é˜²æŠ¤æ•ˆæœ**ï¼š
- âœ… é˜»æ­¢ "åˆ é™¤æ‰€æœ‰é‚®ä»¶" ç­‰å±é™©æŒ‡ä»¤
- âœ… æ•æ„Ÿæ“ä½œï¼ˆåˆ é™¤ã€å‘é€ï¼‰éœ€ç”¨æˆ·ç¡®è®¤
- âœ… è‡ªåŠ¨è„±æ•å›å¤ä¸­çš„é‚®ç®±ã€æ‰‹æœºå·ã€èº«ä»½è¯
- âœ… è¯†åˆ«å¹¶æ‹¦æˆª prompt injection æ”»å‡»

### 1.4 ClaudeBot é›†æˆè¯¦ç»†è®¾è®¡ï¼ˆå®Œæ•´ç‰ˆç‰¹æ€§ï¼‰

**å¤šå·¥å…·ååŒé˜²æŠ¤æ¶æ„**ï¼š

```yaml
claudebot_protection:
  # ç¬¬ä¸€é“é˜²çº¿ï¼šOpenGuardrailsï¼ˆå†…å®¹å®‰å…¨ï¼‰
  layer_1:
    tool: OpenGuardrails
    checks:
      - content_safety      # å†…å®¹å®‰å…¨æ£€æµ‹
      - pii_detection       # éšç§ä¿¡æ¯è¯†åˆ«
      - toxicity_filter     # æœ‰å®³å†…å®¹è¿‡æ»¤

  # ç¬¬äºŒé“é˜²çº¿ï¼šLlamaFirewallï¼ˆæ“ä½œå®‰å…¨ï¼‰
  layer_2:
    tool: LlamaFirewall
    checks:
      - prompt_injection    # Promptæ³¨å…¥æ£€æµ‹
      - tool_call_security  # å·¥å…·è°ƒç”¨å®‰å…¨
      - permission_check    # æƒé™è¾¹ç•Œæ£€æŸ¥

  # å±é™©æ“ä½œè§„åˆ™
  dangerous_operations:
    blocked:
      - pattern: "delete_*"
        reason: "åˆ é™¤æ“ä½œé»˜è®¤ç¦æ­¢"
      - pattern: "send_email_bulk"
        reason: "æ‰¹é‡å‘é€ç¦æ­¢"

    confirm_required:
      - pattern: "delete_email"
        message: "ç¡®è®¤è¦åˆ é™¤é‚®ä»¶ {email_id} å—ï¼Ÿ"
      - pattern: "send_email"
        message: "ç¡®è®¤å‘é€é‚®ä»¶ç»™ {recipient} å—ï¼Ÿ"

    rate_limited:
      - pattern: "send_*"
        limit: "10/hour"
        reason: "å‘é€æ“ä½œé¢‘ç‡é™åˆ¶"

  # æ•æ„Ÿä¿¡æ¯å¤„ç†
  sensitive_data:
    auto_mask:
      - type: email
        pattern: "\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b"
        replacement: "[é‚®ç®±å·²éšè—]"
      - type: phone
        pattern: "\\b1[3-9]\\d{9}\\b"
        replacement: "[æ‰‹æœºå·å·²éšè—]"
      - type: id_card
        pattern: "\\b\\d{17}[\\dXx]\\b"
        replacement: "[èº«ä»½è¯å·²éšè—]"

  # å®¡è®¡æ—¥å¿—
  audit:
    log_all_tool_calls: true
    alert_on_blocked: true
    retention_days: 90
```

**éƒ¨ç½²å‘½ä»¤ç¤ºä¾‹**ï¼š

```bash
# MVPç‰ˆæœ¬ï¼ˆ3-5å¤©å®ç°ï¼‰
guard-adapter deploy ./claudebot --tool openguardrails

# å®Œæ•´ç‰ˆæœ¬ï¼ˆå¤šå·¥å…·ååŒï¼‰
guard-adapter deploy ./claudebot \
  --tools openguardrails,llamafirewall \
  --config claudebot_protection.yaml \
  --enable-audit
```

---

### 1.5 æœ¯è¯­å®šä¹‰

| æœ¯è¯­ | å®šä¹‰ |
|-----|-----|
| **ç™½ç›’AIåº”ç”¨** | æ”¯æŒè‡ªå®šä¹‰å¼€å‘ä¸æ’ä»¶é›†æˆçš„AIåº”ç”¨ï¼Œå¯é€šè¿‡SDK/ä¸­é—´ä»¶å®ç°å®‰å…¨å·¥å…·çš„æ·±åº¦é›†æˆ |
| **é»‘ç›’AIåº”ç”¨** | ä¸æ”¯æŒè‡ªå®šä¹‰å¼€å‘çš„æˆå“AIåº”ç”¨ï¼Œéœ€é€šè¿‡ä»£ç†ç½‘å…³ç­‰æ–¹å¼å®ç°å®‰å…¨å·¥å…·çš„é€æ˜åŒ–é›†æˆ |
| **å®‰å…¨å·¥å…·é€‚é…æ’ä»¶** | ç”¨äºé€‚é…ç‰¹å®šå®‰å…¨å·¥å…·çš„æ ‡å‡†åŒ–æ’ä»¶ï¼Œå®ç°å®‰å…¨å·¥å…·çš„åè®®è½¬æ¢ã€æ ¼å¼é€‚é…ä¸åŠŸèƒ½å°è£… |
| **AIåº”ç”¨é›†æˆæ’ä»¶** | ç”¨äºé€‚é…ç‰¹å®šAIåº”ç”¨çš„æ ‡å‡†åŒ–æ’ä»¶ï¼Œå®ç°AIåº”ç”¨çš„æ— ä¾µå…¥æ¥å…¥ |
| **è·¨å·¥å…·ååŒæ ¡éªŒ** | å¤šä¸ªå®‰å…¨å·¥å…·æŒ‰é¢„è®¾è§„åˆ™ååŒå·¥ä½œï¼Œå¯¹AIåº”ç”¨çš„è¯·æ±‚/ç»“æœè¿›è¡Œå¤šç»´åº¦æ ¡éªŒ |

---

## äºŒã€æ ¸å¿ƒæ¶æ„è®¾è®¡ï¼ˆå››å±‚ä¸¤ä½“ç³»ï¼‰

é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå½¢æˆ"å››å±‚ä¸¤ä½“ç³»"çš„æ•´ä½“æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AI åº”ç”¨å±‚                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚         â”‚   ç™½ç›’AIåº”ç”¨     â”‚              â”‚   é»‘ç›’AIåº”ç”¨     â”‚                â”‚
â”‚         â”‚ (LangChainç­‰)   â”‚              â”‚ (ç¬¬ä¸‰æ–¹æˆå“åº”ç”¨)  â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                  â”‚ SDK/ä¸­é—´ä»¶                      â”‚ ä»£ç†ç½‘å…³                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ¥å…¥å±‚ (Access Layer)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ å¤šåè®®é€‚é…    â”‚ â”‚ æ™ºèƒ½æ ¼å¼è½¬æ¢  â”‚ â”‚ åŒæ’ä»¶ç®¡ç†    â”‚ â”‚ è·¯ç”±è´Ÿè½½å‡è¡¡  â”‚       â”‚
â”‚  â”‚ REST/gRPC/SDKâ”‚ â”‚ (LLMè¯­ä¹‰æ˜ å°„) â”‚ â”‚ (åº”ç”¨+å·¥å…·)   â”‚ â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ ¸å¿ƒèƒ½åŠ›å±‚ (Core Layer)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ å¤šå®‰å…¨å·¥å…·    â”‚ â”‚ ç»Ÿä¸€è§„åˆ™å¼•æ“  â”‚ â”‚ å…¨æµç¨‹ç®¡æ§    â”‚ â”‚ æƒé™ä¸æˆæœ¬   â”‚       â”‚
â”‚  â”‚ æ ‡å‡†åŒ–å°è£…    â”‚ â”‚ å¢å¼º         â”‚ â”‚ åŸ‹ç‚¹(4èŠ‚ç‚¹)   â”‚ â”‚ ç®¡æ§        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                    è·¨å·¥å…·ååŒæ ¡éªŒå¼•æ“                              â”‚      â”‚
â”‚  â”‚   OpenGuardrails â†â†’ NeMo Guardrails â†â†’ LlamaFirewall â†â†’ ...    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åŸºç¡€æ”¯æ’‘å±‚ (Infrastructure Layer)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ç»Ÿä¸€æ•°æ®å­˜å‚¨  â”‚ â”‚ ç»Ÿä¸€é…ç½®ç®¡ç†  â”‚ â”‚ å…¨é“¾è·¯æ—¥å¿—    â”‚ â”‚ ç»Ÿä¸€å®‰å…¨é˜²æŠ¤  â”‚       â”‚
â”‚  â”‚ MySQL+Redis  â”‚ â”‚ Apollo/Nacos â”‚ â”‚ ELK Stack    â”‚ â”‚ åŠ å¯†+é‰´æƒ    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®ä¸è®­ç»ƒä½“ç³»              â”‚  â”‚      ç»Ÿä¸€è¿ç»´ç›‘æ§ä½“ç³»            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ•°æ®é‡‡é›†   â”‚ â”‚ æ•°æ®å¤„ç†   â”‚   â”‚  â”‚  â”‚ ç›‘æ§æŒ‡æ ‡   â”‚ â”‚ å¯è§†åŒ–ä»ªè¡¨ç›˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ¨¡å‹è®­ç»ƒ   â”‚ â”‚ è¯„ä¼°è¿­ä»£   â”‚   â”‚  â”‚  â”‚ æ™ºèƒ½å‘Šè­¦   â”‚ â”‚ å®¹ç¾å…œåº•   â”‚   â”‚
â”‚  â”‚SFT+RL+RLHFâ”‚ â”‚ ç°åº¦å‘å¸ƒ   â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 æ¶æ„åˆ†å±‚è¯´æ˜

| å±‚çº§ | èŒè´£ | å…³é”®æ¨¡å— |
|-----|------|--------|
| **æ¥å…¥å±‚** | AIåº”ç”¨ä¸ç³»ç»Ÿçš„äº¤äº’å…¥å£ | å¤šåè®®é€‚é…ã€æ™ºèƒ½æ ¼å¼è½¬æ¢ã€åŒæ’ä»¶ç®¡ç†ã€è·¯ç”±è´Ÿè½½å‡è¡¡ |
| **æ ¸å¿ƒèƒ½åŠ›å±‚** | å®‰å…¨å·¥å…·é€‚é…ä¸ååŒç®¡æ§ | å·¥å…·æ ‡å‡†åŒ–å°è£…ã€è§„åˆ™å¼•æ“ã€å…¨æµç¨‹ç®¡æ§ã€è·¨å·¥å…·ååŒ |
| **åŸºç¡€æ”¯æ’‘å±‚** | åº•å±‚æ”¯æ’‘èƒ½åŠ› | æ•°æ®å­˜å‚¨ã€é…ç½®ç®¡ç†ã€æ—¥å¿—æ”¶é›†ã€å®‰å…¨é˜²æŠ¤ |
| **æ•°æ®ä¸è®­ç»ƒä½“ç³»** | Agentèƒ½åŠ›æŒç»­ä¼˜åŒ– | æ•°æ®é‡‡é›†å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€è¯„ä¼°è¿­ä»£ |
| **è¿ç»´ç›‘æ§ä½“ç³»** | ç³»ç»Ÿç¨³å®šè¿è¡Œä¿éšœ | ç›‘æ§å‘Šè­¦ã€å®¹ç¾å…œåº•ã€ä¼˜åŒ–å»ºè®® |

---

## ä¸‰ã€æ ¸å¿ƒæ¨¡å—è¯¦ç»†è®¾è®¡

### 3.1 Scanner Moduleï¼ˆåº”ç”¨æ‰«æåˆ†æå™¨ï¼‰

**åŠŸèƒ½**ï¼šè‡ªåŠ¨è¯†åˆ«ç›®æ ‡ AI åº”ç”¨çš„æŠ€æœ¯æ ˆå’Œæ¶æ„

```python
class ScannerModule:
    """
    æ‰«æå¹¶åˆ†æç›®æ ‡ AI åº”ç”¨çš„æ¶æ„
    """

    def scan_project(self, project_path: str) -> ProjectProfile:
        """
        è¾“å‡ºç¤ºä¾‹:
        {
            "framework": "langchain",           # langchain/llamaindex/custom
            "llm_provider": "openai",           # openai/anthropic/vertexai/azure/local
            "language": "python",               # python/typescript/java/go
            "python_version": "3.11",
            "deployment": "docker",             # docker/k8s/serverless/bare-metal
            "cloud_provider": "aws",            # aws/azure/gcp/on-premise
            "existing_guardrails": [],          # å·²æœ‰çš„å®‰å…¨å·¥å…·
            "entry_points": [...],              # APIå…¥å£ç‚¹
            "data_flow": {...},                 # æ•°æ®æµå›¾
            "dependencies": {...},              # ä¾èµ–å…³ç³»
            "security_requirements": [...]      # æ¨æ–­çš„å®‰å…¨éœ€æ±‚
        }
        """
        pass

    # æ£€æµ‹æ–¹æ³•
    detection_strategies = [
        "package.json / requirements.txt ä¾èµ–åˆ†æ",
        "import è¯­å¥é™æ€åˆ†æ",
        "é…ç½®æ–‡ä»¶è¯†åˆ« (yaml/json/toml)",
        "Dockerfile / K8s manifest åˆ†æ",
        "API ç«¯ç‚¹æ‰«æ",
        "ç¯å¢ƒå˜é‡æ£€æµ‹"
    ]
```

### 3.2 Matcher Moduleï¼ˆå·¥å…·åŒ¹é…å™¨ï¼‰

**åŠŸèƒ½**ï¼šæ ¹æ®åº”ç”¨ç‰¹å¾æ¨èæœ€é€‚åˆçš„å®‰å…¨å·¥å…·ç»„åˆ

```python
class MatcherModule:
    """
    åŸºäºåº”ç”¨ç‰¹å¾åŒ¹é…æœ€ä½³å®‰å…¨å·¥å…·
    """

    # åŒ¹é…è§„åˆ™çŸ©é˜µ
    COMPATIBILITY_MATRIX = {
        ("langchain", "openai", "python"): {
            "recommended": ["NeMo Guardrails", "Guardrails AI"],
            "compatible": ["OpenGuardrails", "LlamaFirewall"],
            "notes": "NeMoä¸LangChainæœ‰å®˜æ–¹é›†æˆæ”¯æŒ"
        },
        ("langchain", "vertexai", "python"): {
            "recommended": ["OpenGuardrails"],
            "compatible": ["Guardrails AI"],
            "warnings": ["NeMo Guardrailså¯èƒ½æœ‰æ€§èƒ½é—®é¢˜"],
            "notes": "å‚è€ƒ GitHub Issue #865"
        },
        ("llamaindex", "anthropic", "python"): {
            "recommended": ["OpenGuardrails", "LlamaFirewall"],
            "compatible": ["Guardrails AI"],
        },
        ("custom", "local_llm", "python"): {
            "recommended": ["OpenGuardrails"],  # æ”¯æŒæœ¬åœ°éƒ¨ç½²
            "compatible": ["LlamaFirewall"],
        },
        # ... æ›´å¤šç»„åˆ
    }

    def match(self, profile: ProjectProfile,
              user_preference: str = None) -> ToolRecommendation:
        """
        è¿”å›æ¨èçš„å·¥å…·å’Œå…¼å®¹æ€§è¯„åˆ†
        """
        pass
```

### 3.3 Generator Moduleï¼ˆä»£ç ç”Ÿæˆå™¨ï¼‰

**åŠŸèƒ½**ï¼šè‡ªåŠ¨ç”Ÿæˆé›†æˆä»£ç å’Œé…ç½®æ–‡ä»¶

```python
class GeneratorModule:
    """
    ç”Ÿæˆé€‚é…ä»£ç å’Œé…ç½®
    """

    def generate_integration(
        self,
        source_app: ProjectProfile,
        target_tool: str,
        config: IntegrationConfig
    ) -> GeneratedCode:
        """
        ç”Ÿæˆå†…å®¹åŒ…æ‹¬:
        1. é›†æˆä»£ç  (wrapper/middleware)
        2. é…ç½®æ–‡ä»¶ (yaml/json)
        3. ç¯å¢ƒå˜é‡æ¨¡æ¿
        4. Docker/K8s é…ç½®æ›´æ–°
        5. ä¾èµ–æ›´æ–° (requirements.txt/package.json)
        6. æµ‹è¯•ç”¨ä¾‹
        """
        pass

    # ç”Ÿæˆæ¨¡æ¿ç±»å‹
    TEMPLATE_TYPES = [
        "middleware_wrapper",      # ä¸­é—´ä»¶åŒ…è£…å™¨
        "api_interceptor",         # API æ‹¦æˆªå™¨
        "streaming_adapter",       # æµå¼å“åº”é€‚é…å™¨
        "async_bridge",            # å¼‚æ­¥æ¡¥æ¥
        "config_transformer",      # é…ç½®è½¬æ¢å™¨
    ]
```

### 3.4 Deployer Moduleï¼ˆéƒ¨ç½²æ‰§è¡Œå™¨ï¼‰

```python
class DeployerModule:
    """
    æ‰§è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²
    """

    deployment_modes = [
        "dry_run",          # é¢„æ¼”æ¨¡å¼ï¼Œåªç”Ÿæˆä¸æ‰§è¡Œ
        "interactive",      # äº¤äº’å¼ï¼Œæ¯æ­¥ç¡®è®¤
        "auto",             # å…¨è‡ªåŠ¨éƒ¨ç½²
        "rollback_ready"    # å¸¦å›æ»šç‚¹çš„éƒ¨ç½²
    ]

    def deploy(self,
               generated_code: GeneratedCode,
               mode: str = "interactive") -> DeploymentResult:
        """
        éƒ¨ç½²æ­¥éª¤:
        1. åˆ›å»ºå¤‡ä»½/å›æ»šç‚¹
        2. å®‰è£…ä¾èµ–
        3. æ³¨å…¥é›†æˆä»£ç 
        4. æ›´æ–°é…ç½®
        5. è¿è¡Œé›†æˆæµ‹è¯•
        6. å¥åº·æ£€æŸ¥
        """
        pass
```

### 3.5 Validator Moduleï¼ˆéªŒè¯å™¨ï¼‰

```python
class ValidatorModule:
    """
    éªŒè¯éƒ¨ç½²æ˜¯å¦æˆåŠŸ
    """

    validation_checks = [
        "dependency_resolution",   # ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
        "import_success",          # å¯¼å…¥æ˜¯å¦æˆåŠŸ
        "config_validity",         # é…ç½®æ˜¯å¦æœ‰æ•ˆ
        "api_health",              # APIå¥åº·æ£€æŸ¥
        "guardrail_trigger_test",  # å®‰å…¨è§„åˆ™è§¦å‘æµ‹è¯•
        "performance_baseline",    # æ€§èƒ½åŸºçº¿å¯¹æ¯”
        "rollback_capability",     # å›æ»šèƒ½åŠ›éªŒè¯
    ]

    def validate(self, deployment: DeploymentResult) -> ValidationReport:
        pass
```

### 3.6 å…¨æµç¨‹ç®¡æ§åŸ‹ç‚¹æ¨¡å—ï¼ˆæ–°å¢ - å€Ÿé‰´è‡ªç”¨æˆ·æ–¹æ¡ˆï¼‰

**æ ¸å¿ƒç›®æ ‡**ï¼šå°†å®‰å…¨å·¥å…·çš„ç®¡æ§èŒƒå›´ç»Ÿä¸€å»¶ä¼¸è‡³AIåº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸ

```python
class LifecycleControlModule:
    """
    å…¨æµç¨‹ç®¡æ§åŸ‹ç‚¹ - 4å¤§æ ¸å¿ƒæ ¡éªŒèŠ‚ç‚¹
    """

    # é¢„è®¾4ä¸ªæ ¸å¿ƒæ ¡éªŒèŠ‚ç‚¹
    CHECKPOINT_NODES = {
        "pre_prompt": {
            "name": "Promptè¾“å…¥å‰",
            "description": "ç”¨æˆ·è¾“å…¥è¿›å…¥LLMå‰çš„å®‰å…¨æ ¡éªŒ",
            "typical_checks": ["jailbreakæ£€æµ‹", "æ•æ„Ÿä¿¡æ¯è¿‡æ»¤", "promptæ³¨å…¥é˜²æŠ¤"]
        },
        "post_task_split": {
            "name": "ä»»åŠ¡æ‹†åˆ†å",
            "description": "Agentå°†ä»»åŠ¡æ‹†åˆ†ä¸ºå­ä»»åŠ¡åçš„æ ¡éªŒ",
            "typical_checks": ["ä»»åŠ¡æ„å›¾æ ¡éªŒ", "æƒé™è¾¹ç•Œæ£€æŸ¥"]
        },
        "pre_tool_call": {
            "name": "å·¥å…·è°ƒç”¨å‰",
            "description": "Agentè°ƒç”¨å¤–éƒ¨å·¥å…·/APIå‰çš„æ ¡éªŒ",
            "typical_checks": ["è°ƒç”¨æƒé™æ ¡éªŒ", "å‚æ•°å®‰å…¨æ£€æŸ¥", "æ•æ„Ÿæ“ä½œæ‹¦æˆª"]
        },
        "post_result": {
            "name": "æœ€ç»ˆç»“æœå",
            "description": "LLMè¾“å‡ºè¿”å›ç”¨æˆ·å‰çš„æ ¡éªŒ",
            "typical_checks": ["å¹»è§‰æ£€æµ‹", "æ•æ„Ÿä¿¡æ¯è„±æ•", "åˆè§„æ€§æ£€æŸ¥"]
        }
    }

    # çµæ´»è§¦å‘ç­–ç•¥
    TRIGGER_STRATEGIES = {
        "realtime": "å®æ—¶æ ¡éªŒ - æ¯ä¸ªè¯·æ±‚ç«‹å³æ ¡éªŒ",
        "batch": "æ‰¹é‡æ ¡éªŒ - é«˜å¹¶å‘åœºæ™¯èšåˆå¤„ç†",
        "async": "å¼‚æ­¥æ ¡éªŒ - ä¸é˜»å¡ä¸»æµç¨‹"
    }

    def configure_checkpoint(
        self,
        node: str,
        guard_tools: List[str],
        trigger_strategy: str,
        priority: int
    ):
        """ä¸ºæ ¡éªŒèŠ‚ç‚¹é…ç½®å®‰å…¨å·¥å…·å’Œè§¦å‘ç­–ç•¥"""
        pass

    def execute_checkpoint(
        self,
        node: str,
        data: Dict,
        context: Dict
    ) -> CheckpointResult:
        """æ‰§è¡Œæ ¡éªŒèŠ‚ç‚¹"""
        pass
```

### 3.7 è·¨å·¥å…·ååŒæ ¡éªŒå¼•æ“ï¼ˆæ–°å¢ - å€Ÿé‰´è‡ªç”¨æˆ·æ–¹æ¡ˆï¼‰

```python
class CrossToolOrchestrator:
    """
    è·¨å·¥å…·ååŒæ ¡éªŒ - å¤šå·¥å…·æŒ‰ä¼˜å…ˆçº§ååŒå·¥ä½œ
    """

    def create_validation_pipeline(
        self,
        tools: List[str],
        priority_order: List[int],
        fusion_strategy: str  # "all_pass" | "majority" | "any_pass"
    ) -> ValidationPipeline:
        """
        åˆ›å»ºååŒæ ¡éªŒæµæ°´çº¿

        ç¤ºä¾‹é…ç½®:
        {
            "pipeline": [
                {"tool": "OpenGuardrails", "priority": 1, "check": "content_safety"},
                {"tool": "LlamaFirewall", "priority": 2, "check": "prompt_injection"},
                {"tool": "NeMo Guardrails", "priority": 3, "check": "topic_control"}
            ],
            "fusion_strategy": "all_pass",
            "fallback": "lightweight_rules"
        }
        """
        pass

    def execute_pipeline(
        self,
        pipeline: ValidationPipeline,
        data: Dict
    ) -> PipelineResult:
        """æ‰§è¡ŒååŒæ ¡éªŒæµæ°´çº¿"""
        pass

    # è·¨å·¥å…·è”åŠ¨å¤„ç†ç­–ç•¥
    LINKAGE_ACTIONS = {
        "block": "ç›´æ¥æ‹¦æˆª",
        "retry_split": "é‡æ–°æ‹†åˆ†ä»»åŠ¡",
        "desensitize": "å†…å®¹è„±æ•",
        "human_review": "äººå·¥å¤æ ¸",
        "secondary_check": "è·¨å·¥å…·äºŒæ¬¡æ ¡éªŒ"
    }
```

### 3.8 Fixer Moduleï¼ˆè‡ªåŠ¨ä¿®å¤å™¨ï¼‰

```python
class FixerModule:
    """
    è‡ªåŠ¨è¯Šæ–­å’Œä¿®å¤å¸¸è§é—®é¢˜
    """

    # å¸¸è§é—®é¢˜å’Œä¿®å¤ç­–ç•¥
    KNOWN_ISSUES = {
        "nemo_langchain_performance": {
            "ç—‡çŠ¶": "å“åº”æ—¶é—´ä»30så¢åŠ åˆ°80s",
            "åŸå› ": "streamingé…ç½®ä¸å½“",
            "ä¿®å¤": "apply_streaming_fix()",
            "å‚è€ƒ": "GitHub Issue #473"
        },
        "vertexai_compatibility": {
            "ç—‡çŠ¶": "Geminiæ¨¡å‹è°ƒç”¨å¤±è´¥",
            "åŸå› ": "APIç‰ˆæœ¬ä¸åŒ¹é…",
            "ä¿®å¤": "upgrade_to_v0.11.0()",
            "å‚è€ƒ": "GitHub Discussion #865"
        },
        "python_version_mismatch": {
            "ç—‡çŠ¶": "ImportError",
            "åŸå› ": "Python 3.9 ä¸å†æ”¯æŒ",
            "ä¿®å¤": "suggest_python_upgrade()"
        },
        # ... æ›´å¤šé—®é¢˜æ¨¡å¼
    }

    def diagnose_and_fix(self, error: Exception) -> FixResult:
        """
        1. é”™è¯¯æ¨¡å¼åŒ¹é…
        2. æ ¹å› åˆ†æ
        3. åº”ç”¨ä¿®å¤
        4. éªŒè¯ä¿®å¤æ•ˆæœ
        """
        pass
```

### 3.9 å®¹ç¾å…œåº•æ¨¡å—ï¼ˆæ–°å¢ - å€Ÿé‰´è‡ªç”¨æˆ·æ–¹æ¡ˆï¼‰

```python
class DisasterRecoveryModule:
    """
    å®¹ç¾å…œåº•ç­–ç•¥ - ç¡®ä¿å®‰å…¨ç®¡æ§ä¸ä¸­æ–­
    """

    # å…œåº•ç­–ç•¥é…ç½®
    FALLBACK_STRATEGIES = {
        "tool_failover": {
            "description": "åˆ‡æ¢åˆ°åŒåŠŸèƒ½å…¶ä»–å®‰å…¨å·¥å…·å®ä¾‹",
            "trigger": "å®‰å…¨å·¥å…·æœåŠ¡å®•æœº",
            "action": "è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨å·¥å…·"
        },
        "lightweight_rules": {
            "description": "å†…ç½®è½»é‡è§„åˆ™å¼•æ“å…œåº•",
            "trigger": "æ‰€æœ‰å®‰å…¨å·¥å…·ä¸å¯ç”¨",
            "action": "å¯ç”¨å…³é”®è¯è¿‡æ»¤+æ­£åˆ™åŒ¹é…åŸºç¡€é˜²æŠ¤"
        }
    }

    def health_check(self, tool_instances: List[str]) -> HealthStatus:
        """å®šæœŸå¥åº·æ£€æŸ¥æ‰€æœ‰å®‰å…¨å·¥å…·å®ä¾‹"""
        pass

    def execute_failover(
        self,
        failed_tool: str,
        fallback_strategy: str
    ) -> FailoverResult:
        """
        æ‰§è¡Œå®¹ç¾åˆ‡æ¢:
        1. æ£€æµ‹å·¥å…·å®•æœº
        2. é€‰æ‹©å…œåº•ç­–ç•¥
        3. æ‰§è¡Œåˆ‡æ¢
        4. æœåŠ¡æ¢å¤åè‡ªåŠ¨åˆ‡å›
        """
        pass

    # å†…ç½®è½»é‡è§„åˆ™å¼•æ“ï¼ˆæœ€åå…œåº•ï¼‰
    LIGHTWEIGHT_RULES = {
        "keyword_filter": ["æ•æ„Ÿè¯åˆ—è¡¨", "é«˜å±æŒ‡ä»¤åˆ—è¡¨"],
        "regex_patterns": ["promptæ³¨å…¥æ­£åˆ™", "SQLæ³¨å…¥æ­£åˆ™"],
        "length_limit": {"max_input": 10000, "max_output": 50000}
    }

    # å®¹ç¾æ¼”ç»ƒæœºåˆ¶
    def disaster_drill(self):
        """
        æ¯æœˆè‡ªåŠ¨æ‰§è¡Œå®¹ç¾åˆ‡æ¢æ¼”ç»ƒ:
        - æ¨¡æ‹Ÿå·¥å…·å®•æœº
        - éªŒè¯å…œåº•ç­–ç•¥æœ‰æ•ˆæ€§
        - è®°å½•æ¼”ç»ƒç»“æœ
        """
        pass
```

---

## å››ã€æ•°æ®æ¥æºè¯¦ç»†è¯´æ˜

### 4.1 æ–‡æ¡£æ•°æ®æº

| æ•°æ®ç±»å‹ | æ¥æº | è·å–æ–¹å¼ | æ›´æ–°é¢‘ç‡ |
|---------|------|---------|---------|
| **å®˜æ–¹æ–‡æ¡£** | å„å·¥å…·å®˜ç½‘/GitHub | çˆ¬è™« + API | æ¯æ—¥ |
| **APIå‚è€ƒ** | OpenAPI/Swagger specs | ç›´æ¥è§£æ | æ¯å‘¨ |
| **GitHub Issues** | å„å·¥å…·ä»“åº“ | GitHub API | æ¯æ—¥ |
| **GitHub Discussions** | å„å·¥å…·ä»“åº“ | GitHub API | æ¯æ—¥ |
| **Stack Overflow** | SO API | æ ‡ç­¾è¿‡æ»¤ | æ¯æ—¥ |
| **æŠ€æœ¯åšå®¢** | Medium/Dev.toç­‰ | RSS + çˆ¬è™« | æ¯å‘¨ |
| **å­¦æœ¯è®ºæ–‡** | arXiv/Papers with Code | API | æ¯å‘¨ |

### 4.2 ä»£ç æ•°æ®æº

```yaml
ä»£ç æ•°æ®æº:
  å®˜æ–¹ç¤ºä¾‹:
    - OpenGuardrails/examples/
    - NVIDIA-NeMo/Guardrails/examples/
    - meta-llama/PurpleLlama/LlamaFirewall/examples/
    - guardrails-ai/guardrails/examples/

  é›†æˆæ¡ˆä¾‹:
    - GitHubæœç´¢: "nemo guardrails langchain"
    - GitHubæœç´¢: "openguardrails integration"
    - GitHubæœç´¢: "llamafirewall setup"

  é…ç½®æ¨¡æ¿:
    - å„å·¥å…·çš„config/ç›®å½•
    - docker-compose.ymlç¤ºä¾‹
    - K8s manifests

  æµ‹è¯•ç”¨ä¾‹:
    - å„å·¥å…·çš„tests/ç›®å½•
    - é›†æˆæµ‹è¯•æ¡ˆä¾‹
```

### 4.3 é—®é¢˜è§£å†³æ•°æ®æº

```yaml
é—®é¢˜è§£å†³çŸ¥è¯†åº“:
  ç»“æ„åŒ–æ•°æ®:
    - GitHub Issues (open + closed)
    - GitHub Discussions
    - å®˜æ–¹Troubleshootingæ–‡æ¡£

  æ ‡æ³¨è¦æ±‚:
    - é—®é¢˜æè¿°
    - é”™è¯¯ä¿¡æ¯/æ—¥å¿—
    - ç¯å¢ƒä¿¡æ¯ (ç‰ˆæœ¬ã€OSã€ä¾èµ–)
    - æ ¹å› åˆ†æ
    - è§£å†³æ–¹æ¡ˆ
    - éªŒè¯æ–¹æ³•

  æ•°æ®å¤„ç†:
    - ä½¿ç”¨LLMæå–ç»“æ„åŒ–ä¿¡æ¯
    - èšç±»ç›¸ä¼¼é—®é¢˜
    - å»ºç«‹å› æœå…³ç³»å›¾
```

### 4.4 å…¼å®¹æ€§çŸ©é˜µæ•°æ®

```yaml
å…¼å®¹æ€§æµ‹è¯•æ•°æ®:
  æµ‹è¯•ç¯å¢ƒçŸ©é˜µ:
    python_versions: [3.10, 3.11, 3.12, 3.13]
    frameworks: [langchain, llamaindex, haystack, custom]
    llm_providers: [openai, anthropic, vertexai, azure, bedrock, local]
    guardrail_tools: [openguardrails, nemo, llamafirewall, guardrails_ai]
    deployment: [docker, k8s, serverless, bare_metal]

  æµ‹è¯•ç”¨ä¾‹:
    - åŸºæœ¬é›†æˆæµ‹è¯•
    - æ€§èƒ½åŸºå‡†æµ‹è¯•
    - è¾¹ç•Œæ¡ä»¶æµ‹è¯•
    - æ•…éšœæ³¨å…¥æµ‹è¯•

  æ•°æ®æ”¶é›†:
    - CI/CDè‡ªåŠ¨åŒ–æµ‹è¯•
    - ç¤¾åŒºåé¦ˆæ”¶é›†
    - ç”Ÿäº§ç¯å¢ƒé¥æµ‹ (opt-in)
```

---

## äº”ã€è®­ç»ƒæ–¹å¼è¯¦ç»†è¯´æ˜

### 5.1 æ•´ä½“è®­ç»ƒæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Training Pipeline                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Base LLM   â”‚â”€â”€â”€â”€â–¶â”‚  SFT Stage  â”‚â”€â”€â”€â”€â–¶â”‚  DPO/RLHF   â”‚       â”‚
â”‚  â”‚  (Qwen2.5)  â”‚     â”‚  (ç›‘ç£å¾®è°ƒ)  â”‚     â”‚  (åå¥½å¯¹é½)  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                    â”‚               â”‚
â”‚                             â–¼                    â–¼               â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                      â”‚  Tool Use   â”‚     â”‚  RAGå¢å¼º    â”‚       â”‚
â”‚                      â”‚  Training   â”‚     â”‚  çŸ¥è¯†åº“     â”‚       â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Stage 1: ç›‘ç£å¾®è°ƒ (SFT)

**ç›®æ ‡**: è®©æ¨¡å‹å­¦ä¼šç†è§£ä»»åŠ¡å’ŒåŸºæœ¬çš„ä»£ç ç”Ÿæˆèƒ½åŠ›

```python
# è®­ç»ƒæ•°æ®æ ¼å¼
SFT_DATA_FORMAT = {
    "conversations": [
        {
            "role": "user",
            "content": """
            æˆ‘æœ‰ä¸€ä¸ªåŸºäºLangChainçš„åº”ç”¨ï¼Œä½¿ç”¨OpenAI APIï¼Œ
            éƒ¨ç½²åœ¨Dockerä¸­ã€‚è¯·å¸®æˆ‘é›†æˆNeMo Guardrailsã€‚

            é¡¹ç›®ç»“æ„:
            /app
              /src
                main.py
                chains/
                  qa_chain.py
              requirements.txt
              Dockerfile
            """
        },
        {
            "role": "assistant",
            "content": """
            æˆ‘æ¥å¸®ä½ é›†æˆNeMo Guardrailsã€‚

            **Step 1: åˆ†æé¡¹ç›®ç»“æ„**
            [è°ƒç”¨ Scanner å·¥å…·åˆ†æé¡¹ç›®]

            **Step 2: ç”Ÿæˆé›†æˆä»£ç **

            é¦–å…ˆæ›´æ–° `requirements.txt`:
            ```
            nemoguardrails>=0.11.0
            ```

            åˆ›å»º `guardrails_config.yaml`:
            ```yaml
            models:
              - type: main
                engine: openai
                model: gpt-4

            rails:
              input:
                flows:
                  - check jailbreak
                  - check sensitive data
              output:
                flows:
                  - check hallucination
            ```

            ä¿®æ”¹ `main.py` é›†æˆguardrails:
            ```python
            from nemoguardrails import RailsConfig, LLMRails

            config = RailsConfig.from_path("./guardrails_config.yaml")
            rails = LLMRails(config)

            # åŒ…è£…åŸæœ‰chain
            async def guarded_chain(query: str):
                response = await rails.generate_async(
                    messages=[{"role": "user", "content": query}]
                )
                return response
            ```

            **Step 3: éªŒè¯é›†æˆ**
            [è¿è¡Œæµ‹è¯•ç”¨ä¾‹éªŒè¯]
            """
        }
    ]
}

# è®­ç»ƒæ•°æ®ç±»å‹
SFT_TRAINING_DATA_TYPES = [
    "åº”ç”¨åˆ†æå¯¹è¯",           # 10K samples
    "å·¥å…·æ¨èå¯¹è¯",           # 5K samples
    "ä»£ç ç”Ÿæˆå¯¹è¯",           # 20K samples
    "é…ç½®ç”Ÿæˆå¯¹è¯",           # 10K samples
    "é—®é¢˜è¯Šæ–­å¯¹è¯",           # 15K samples
    "ä¿®å¤å»ºè®®å¯¹è¯",           # 10K samples
]
```

**SFTè®­ç»ƒé…ç½®**:

```yaml
sft_training_config:
  base_model: "Qwen/Qwen2.5-72B-Instruct"  # æˆ– 32B/14B æ ¹æ®èµ„æº

  training_args:
    learning_rate: 2e-5
    num_epochs: 3
    batch_size: 4
    gradient_accumulation_steps: 8
    warmup_ratio: 0.1
    weight_decay: 0.01

  lora_config:  # ä½¿ç”¨LoRAé™ä½èµ„æºéœ€æ±‚
    r: 64
    lora_alpha: 128
    target_modules: ["q_proj", "k_proj", "v_proj", "o_proj"]
    lora_dropout: 0.05

  data:
    total_samples: 70000
    train_split: 0.9
    eval_split: 0.1
```

### 5.3 Stage 2: å·¥å…·ä½¿ç”¨è®­ç»ƒ

**ç›®æ ‡**: è®©æ¨¡å‹å­¦ä¼šæ­£ç¡®è°ƒç”¨å„ç§å·¥å…·

```python
# Function Calling è®­ç»ƒæ•°æ®
TOOL_TRAINING_DATA = {
    "tools": [
        {
            "name": "scan_project",
            "description": "æ‰«æåˆ†æAIåº”ç”¨é¡¹ç›®ç»“æ„å’ŒæŠ€æœ¯æ ˆ",
            "parameters": {
                "project_path": "string",
                "depth": "int, optional"
            }
        },
        {
            "name": "match_guardrail",
            "description": "æ ¹æ®é¡¹ç›®ç‰¹å¾åŒ¹é…åˆé€‚çš„å®‰å…¨å·¥å…·",
            "parameters": {
                "profile": "ProjectProfile",
                "preferences": "list[str], optional"
            }
        },
        {
            "name": "generate_integration_code",
            "description": "ç”Ÿæˆé›†æˆä»£ç å’Œé…ç½®",
            "parameters": {
                "source_profile": "ProjectProfile",
                "target_tool": "string",
                "options": "dict, optional"
            }
        },
        {
            "name": "deploy",
            "description": "æ‰§è¡Œéƒ¨ç½²",
            "parameters": {
                "code": "GeneratedCode",
                "mode": "string"
            }
        },
        {
            "name": "validate",
            "description": "éªŒè¯éƒ¨ç½²ç»“æœ",
            "parameters": {
                "deployment_id": "string"
            }
        },
        {
            "name": "diagnose_error",
            "description": "è¯Šæ–­é”™è¯¯å¹¶æä¾›ä¿®å¤å»ºè®®",
            "parameters": {
                "error_log": "string",
                "context": "dict"
            }
        }
    ],

    "training_examples": [
        {
            "user_input": "å¸®æˆ‘ç»™è¿™ä¸ªé¡¹ç›®åŠ ä¸Šå®‰å…¨é˜²æŠ¤",
            "expected_tool_calls": [
                {"name": "scan_project", "args": {"project_path": "."}},
                {"name": "match_guardrail", "args": {"profile": "<scan_result>"}},
                {"name": "generate_integration_code", "args": {...}},
                {"name": "deploy", "args": {...}},
                {"name": "validate", "args": {...}}
            ]
        }
    ]
}
```

### 5.4 Stage 3: DPO/RLHF åå¥½å¯¹é½

**ç›®æ ‡**: ä¼˜åŒ–ä»£ç è´¨é‡ã€ç”¨æˆ·ä½“éªŒã€å®‰å…¨æ€§

```python
# DPO è®­ç»ƒæ•°æ®æ ¼å¼
DPO_TRAINING_DATA = {
    "prompt": "ä¸ºLangChainåº”ç”¨ç”ŸæˆNeMo Guardrailsé›†æˆä»£ç ",

    "chosen": """
    # ä¼˜é€‰å“åº”ç‰¹ç‚¹:
    # 1. ä»£ç ç®€æ´ã€å¯è¯»æ€§å¼º
    # 2. åŒ…å«å¿…è¦çš„é”™è¯¯å¤„ç†
    # 3. æœ‰æ¸…æ™°çš„æ³¨é‡Š
    # 4. éµå¾ªæœ€ä½³å®è·µ
    # 5. æ€§èƒ½è€ƒè™‘ (å¼‚æ­¥ã€æµå¼)

    from nemoguardrails import RailsConfig, LLMRails
    from nemoguardrails.streaming import StreamingHandler

    async def create_guarded_chain():
        config = RailsConfig.from_path("./config")
        rails = LLMRails(config)

        async def process(query: str):
            try:
                # ä½¿ç”¨æµå¼å¤„ç†æé«˜å“åº”é€Ÿåº¦
                async for chunk in rails.stream_async(
                    messages=[{"role": "user", "content": query}]
                ):
                    yield chunk
            except Exception as e:
                logger.error(f"Guardrail error: {e}")
                raise GuardrailException(str(e))

        return process
    """,

    "rejected": """
    # è¢«æ‹’ç»å“åº”çš„é—®é¢˜:
    # 1. åŒæ­¥é˜»å¡è°ƒç”¨ (æ€§èƒ½å·®)
    # 2. ç¼ºå°‘é”™è¯¯å¤„ç†
    # 3. ç¡¬ç¼–ç é…ç½®
    # 4. å¿½ç•¥æµå¼å¤„ç†

    from nemoguardrails import LLMRails

    rails = LLMRails.from_path("./config")  # é”™è¯¯çš„APIç”¨æ³•

    def process(query):
        return rails.generate(query)  # åŒæ­¥é˜»å¡
    """
}

# DPOåå¥½ç»´åº¦
PREFERENCE_DIMENSIONS = [
    "code_correctness",      # ä»£ç æ­£ç¡®æ€§
    "code_quality",          # ä»£ç è´¨é‡
    "performance",           # æ€§èƒ½è€ƒè™‘
    "error_handling",        # é”™è¯¯å¤„ç†
    "security",              # å®‰å…¨æ€§
    "maintainability",       # å¯ç»´æŠ¤æ€§
    "documentation",         # æ–‡æ¡£/æ³¨é‡Š
    "user_experience",       # ç”¨æˆ·ä½“éªŒ
]
```

**DPOè®­ç»ƒé…ç½®**:

```yaml
dpo_training_config:
  base_model: "sft_checkpoint"

  training_args:
    learning_rate: 5e-7
    num_epochs: 1
    batch_size: 2
    beta: 0.1  # KLæƒ©ç½šç³»æ•°

  data:
    preference_pairs: 20000
    sources:
      - human_annotation: 5000      # äººå·¥æ ‡æ³¨
      - gpt4_judge: 10000           # GPT-4è¯„åˆ¤
      - execution_feedback: 5000    # æ‰§è¡Œç»“æœåé¦ˆ
```

### 5.5 è®­ç»ƒå¢å¼ºç­–ç•¥ï¼ˆæ–°å¢ - èåˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰

```yaml
# ==========================================
# å€Ÿé‰´è‡ªç”¨æˆ·æ–¹æ¡ˆçš„è®­ç»ƒå¢å¼ºç­–ç•¥
# ==========================================

training_enhancements:

  # 1. å¤šä»»åŠ¡è”åˆå¾®è°ƒï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  multi_task_joint_training:
    description: "å°†å¤šä¸ªæ ¸å¿ƒä»»åŠ¡åŒæ—¶çº³å…¥å¾®è°ƒï¼Œæå‡æ¨¡å‹å¤šä»»åŠ¡ååŒèƒ½åŠ›"
    tasks:
      - tool_selection      # å·¥å…·é€‰æ‹©å†³ç­–
      - format_conversion   # æ ¼å¼è½¬æ¢
      - routing_decision    # è·¯ç”±å†³ç­–
      - error_diagnosis     # é”™è¯¯è¯Šæ–­
    benefit: "æå‡æ¨¡å‹çš„å¤šä»»åŠ¡ååŒèƒ½åŠ›ï¼Œå‡å°‘ä»»åŠ¡åˆ‡æ¢å¼€é”€"

  # 2. é«˜å¹¶å‘æ¨¡æ‹Ÿç¯å¢ƒï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  high_concurrency_simulation:
    description: "æ­å»ºæ¨¡æ‹Ÿç¯å¢ƒéªŒè¯æ¨¡å‹é²æ£’æ€§"
    capabilities:
      - qps_simulation: "æ¨¡æ‹Ÿ10ä¸‡çº§QPSå‹åŠ›"
      - random_failure: "éšæœºå¼‚å¸¸æ³¨å…¥ï¼ˆå·¥å…·å®•æœºã€ç½‘ç»œå»¶è¿Ÿï¼‰"
      - resource_contention: "èµ„æºç«äº‰åœºæ™¯"
    metrics:
      - throughput_under_pressure
      - error_rate_under_failure
      - recovery_time

  # 3. è¾¹ç•Œåœºæ™¯æ•°æ®ç”Ÿæˆï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  boundary_data_generation:
    scenarios:
      - extreme_qps: "æç«¯å¹¶å‘åœºæ™¯"
      - complex_nesting: "å¤æ‚æ ¼å¼åµŒå¥—"
      - multimodal_mixed: "å¤šæ¨¡æ€æ··åˆæ•°æ®"
      - rare_exceptions: "ç½•è§å¼‚å¸¸åœºæ™¯"
    target: "è¾¹ç•Œåœºæ™¯é€‚é…æˆåŠŸç‡â‰¥85%"

  # 4. ä¸“å®¶åé¦ˆåˆ†çº§æœºåˆ¶ï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  expert_feedback_grading:
    levels:
      - core_decision: "æ ¸å¿ƒå†³ç­–åé¦ˆï¼ˆæƒé‡æœ€é«˜ï¼‰"
      - optimization_suggestion: "ä¼˜åŒ–å»ºè®®åé¦ˆ"
      - error_correction: "é”™è¯¯ä¿®æ­£åé¦ˆ"
    benefit: "æŒ‰æƒé‡çº³å…¥è®­ç»ƒï¼Œæå‡è®­ç»ƒæ•ˆç‡"

  # 5. å‚æ•°è‡ªé€‚åº”è°ƒæ•´ï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  adaptive_parameter_tuning:
    triggers:
      - loss_plateau: "æŸå¤±å€¼åœæ»æ—¶è‡ªåŠ¨è°ƒæ•´å­¦ä¹ ç‡"
      - validation_drop: "éªŒè¯é›†æŒ‡æ ‡ä¸‹é™æ—¶è°ƒæ•´batch_size"
      - overfitting_detected: "è¿‡æ‹Ÿåˆæ—¶å¢åŠ æ­£åˆ™åŒ–"
    benefit: "é¿å…è¿‡æ‹Ÿåˆä¸è®­ç»ƒåœæ»"

  # 6. ç´§æ€¥è¿­ä»£æœºåˆ¶ï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  emergency_iteration:
    triggers:
      - security_vulnerability: "é‡å¤§å®‰å…¨æ¼æ´"
      - metric_significant_drop: "æ ¸å¿ƒæŒ‡æ ‡å¤§å¹…ä¸‹æ»‘"
    sla: "24å°æ—¶å†…å®Œæˆæ¨¡å‹ä¿®å¤ä¸é‡æ–°éƒ¨ç½²"
    process:
      - hotfix_data_collection
      - rapid_fine_tuning
      - emergency_evaluation
      - hot_deployment
```

### 5.6 Stage 4: RAG çŸ¥è¯†åº“æ„å»º

**ç›®æ ‡**: å®æ—¶è·å–æœ€æ–°æ–‡æ¡£å’Œè§£å†³æ–¹æ¡ˆ

```python
# RAGç³»ç»Ÿæ¶æ„
class RAGKnowledgeBase:
    """
    çŸ¥è¯†åº“æ„å»ºå’Œæ£€ç´¢ç³»ç»Ÿ
    """

    def __init__(self):
        self.vector_store = ChromaDB()  # æˆ– Pinecone/Milvus
        self.embedder = "BAAI/bge-large-en-v1.5"

    # çŸ¥è¯†åº“ç´¢å¼•ç»“æ„
    INDEXES = {
        "documentation": {
            "description": "å®˜æ–¹æ–‡æ¡£",
            "chunk_size": 1000,
            "chunk_overlap": 200,
            "update_frequency": "daily"
        },
        "code_examples": {
            "description": "ä»£ç ç¤ºä¾‹",
            "chunk_size": 2000,  # ä»£ç å—æ›´å¤§
            "chunk_overlap": 500,
            "update_frequency": "weekly"
        },
        "issues_solutions": {
            "description": "é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ",
            "chunk_size": 1500,
            "chunk_overlap": 300,
            "update_frequency": "daily"
        },
        "compatibility_matrix": {
            "description": "å…¼å®¹æ€§æµ‹è¯•ç»“æœ",
            "chunk_size": 500,
            "chunk_overlap": 100,
            "update_frequency": "weekly"
        }
    }

    def retrieve(self, query: str, index: str, top_k: int = 5):
        """æ£€ç´¢ç›¸å…³æ–‡æ¡£"""
        pass

    def update_index(self, index: str, documents: List[Document]):
        """æ›´æ–°ç´¢å¼•"""
        pass
```

**çŸ¥è¯†åº“æ•°æ®å¤„ç†æµç¨‹**:

```yaml
knowledge_pipeline:
  1_collection:
    - github_crawler: "æŠ“å–å®˜æ–¹ä»“åº“"
    - doc_parser: "è§£ææ–‡æ¡£ç«™ç‚¹"
    - issue_fetcher: "è·å–Issues/Discussions"

  2_processing:
    - chunk_splitter: "æ™ºèƒ½åˆ†å—"
    - metadata_extractor: "æå–å…ƒæ•°æ®"
    - deduplication: "å»é‡"

  3_enrichment:
    - llm_summarization: "LLMç”Ÿæˆæ‘˜è¦"
    - entity_extraction: "å®ä½“æŠ½å–"
    - relation_mapping: "å…³ç³»æ˜ å°„"

  4_indexing:
    - embedding_generation: "ç”Ÿæˆå‘é‡"
    - vector_indexing: "å‘é‡ç´¢å¼•"
    - keyword_indexing: "å…³é”®è¯ç´¢å¼• (BM25)"

  5_validation:
    - retrieval_testing: "æ£€ç´¢æµ‹è¯•"
    - quality_scoring: "è´¨é‡è¯„åˆ†"
```

---

## å…­ã€å®Œæ•´å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚: "å¸®æˆ‘çš„é¡¹ç›®æ·»åŠ AIå®‰å…¨é˜²æŠ¤"
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 1: é¡¹ç›®æ‰«æåˆ†æ              â”‚
    â”‚  - æ£€æµ‹æŠ€æœ¯æ ˆ (LangChain + OpenAI) â”‚
    â”‚  - è¯†åˆ«éƒ¨ç½²æ–¹å¼ (Docker)           â”‚
    â”‚  - åˆ†ææ•°æ®æµ                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 2: å®‰å…¨å·¥å…·åŒ¹é…              â”‚
    â”‚  - æŸ¥è¯¢å…¼å®¹æ€§çŸ©é˜µ                  â”‚
    â”‚  - RAGæ£€ç´¢æœ€æ–°ä¿¡æ¯                 â”‚
    â”‚  - æ¨è: NeMo Guardrails          â”‚
    â”‚  - å¤‡é€‰: OpenGuardrails           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 3: ç”¨æˆ·ç¡®è®¤                  â”‚
    â”‚  - å±•ç¤ºæ¨èæ–¹æ¡ˆ                    â”‚
    â”‚  - è¯´æ˜ä¼˜ç¼ºç‚¹                      â”‚
    â”‚  - è·å–ç”¨æˆ·é€‰æ‹©                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 4: ä»£ç ç”Ÿæˆ                  â”‚
    â”‚  - ç”Ÿæˆé›†æˆä»£ç                     â”‚
    â”‚  - ç”Ÿæˆé…ç½®æ–‡ä»¶                    â”‚
    â”‚  - ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹                    â”‚
    â”‚  - æ›´æ–°ä¾èµ–æ–‡ä»¶                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 5: éƒ¨ç½²æ‰§è¡Œ                  â”‚
    â”‚  - åˆ›å»ºå›æ»šç‚¹                      â”‚
    â”‚  - å®‰è£…ä¾èµ–                        â”‚
    â”‚  - åº”ç”¨ä»£ç å˜æ›´                    â”‚
    â”‚  - æ›´æ–°é…ç½®                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 6: éªŒè¯æµ‹è¯•                  â”‚
    â”‚  - è¿è¡Œé›†æˆæµ‹è¯•                    â”‚
    â”‚  - å®‰å…¨è§„åˆ™è§¦å‘æµ‹è¯•                â”‚
    â”‚  - æ€§èƒ½åŸºå‡†å¯¹æ¯”                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚
        æˆåŠŸ âœ“          å¤±è´¥ âœ—
           â”‚               â”‚
           â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ç”ŸæˆæŠ¥å‘Š    â”‚ â”‚  è‡ªåŠ¨è¯Šæ–­ä¿®å¤   â”‚
    â”‚  éƒ¨ç½²å®Œæˆ    â”‚ â”‚  - é”™è¯¯åˆ†æ     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  - åº”ç”¨ä¿®å¤     â”‚
                    â”‚  - é‡æ–°éªŒè¯     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€æŠ€æœ¯æ ˆå»ºè®®

### 7.1 æ¨¡å‹é€‰æ‹©

| ç”¨é€” | æ¨èæ¨¡å‹ | å¤‡é€‰ |
|-----|---------|------|
| **ä¸»Agentæ¨¡å‹** | Qwen2.5-72B-Instruct | Claude 3.5 / GPT-4o |
| **ä»£ç ç”Ÿæˆ** | DeepSeek-Coder-V2 | Qwen2.5-Coder-32B |
| **Embedding** | BGE-Large | text-embedding-3-large |
| **è½»é‡çº§ä»»åŠ¡** | Qwen2.5-7B | Llama 3.1-8B |

### 7.2 åŸºç¡€è®¾æ–½

```yaml
infrastructure:
  vector_database:
    - primary: "Milvus"
    - alternative: "Pinecone / ChromaDB"

  orchestration:
    - primary: "LangGraph"
    - alternative: "AutoGen / CrewAI"

  deployment:
    - containerization: "Docker"
    - orchestration: "Kubernetes"
    - serverless: "AWS Lambda / Cloud Run"

  monitoring:
    - observability: "LangSmith / Phoenix"
    - metrics: "Prometheus + Grafana"
    - logging: "ELK Stack"

  ci_cd:
    - testing: "pytest + integration tests"
    - automation: "GitHub Actions"
```

### 7.3 å¼€å‘æ¡†æ¶

```python
# æ¨èæŠ€æœ¯æ ˆ
TECH_STACK = {
    "agent_framework": "LangGraph",  # çŠ¶æ€æœºç®¡ç†
    "tool_integration": "LangChain Tools",
    "api_framework": "FastAPI",
    "async_runtime": "asyncio + uvloop",
    "config_management": "Pydantic + YAML",
    "testing": "pytest + pytest-asyncio",
    "documentation": "MkDocs",
}
```

---

## å…«ã€ç°åº¦å‘å¸ƒç­–ç•¥ï¼ˆæ–°å¢ - å€Ÿé‰´è‡ªç”¨æˆ·æ–¹æ¡ˆï¼‰

### 8.1 æµé‡æ¢¯åº¦åˆ†é…

```yaml
gray_release_strategy:
  # æµé‡æ¢¯åº¦åˆ†é…ï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  traffic_gradient:
    - stage_1: {ratio: 10%, duration: "2å°æ—¶", rollback_threshold: "é”™è¯¯ç‡>5%"}
    - stage_2: {ratio: 30%, duration: "4å°æ—¶", rollback_threshold: "é”™è¯¯ç‡>3%"}
    - stage_3: {ratio: 50%, duration: "8å°æ—¶", rollback_threshold: "é”™è¯¯ç‡>2%"}
    - stage_4: {ratio: 100%, duration: "æŒç»­ç›‘æ§", rollback_threshold: "é”™è¯¯ç‡>1%"}

  # å®æ—¶ç›‘æ§æŒ‡æ ‡
  monitoring_metrics:
    - model_inference_latency: "<100ms"
    - tool_selection_accuracy: ">95%"
    - format_conversion_success_rate: ">99%"
    - error_rate: "<1%"

  # è‡ªåŠ¨å›æ»šæ¡ä»¶
  auto_rollback:
    triggers:
      - error_rate_spike: "é”™è¯¯ç‡çªå¢50%"
      - latency_spike: "å»¶è¿Ÿçªå¢200%"
      - service_unavailable: "æœåŠ¡ä¸å¯ç”¨>30ç§’"
    action: "ç«‹å³å›æ»šåˆ°ä¸Šä¸€ç¨³å®šç‰ˆæœ¬"

  # å›æ»šéªŒè¯
  rollback_verification:
    - health_check_interval: "5ç§’"
    - verification_duration: "10åˆ†é’Ÿ"
    - success_criteria: "æ‰€æœ‰æ ¸å¿ƒæŒ‡æ ‡æ¢å¤æ­£å¸¸"
```

---

## ä¹ã€è¯„ä¼°æŒ‡æ ‡

### 9.1 æ ¸å¿ƒKPI

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|-----|------|---------|
| **ä¸€é”®éƒ¨ç½²æˆåŠŸç‡** | â‰¥90% | ç«¯åˆ°ç«¯æµ‹è¯• |
| **å¹³å‡éƒ¨ç½²æ—¶é—´** | <5åˆ†é’Ÿ | è®¡æ—¶ |
| **é—®é¢˜è‡ªåŠ¨ä¿®å¤ç‡** | â‰¥70% | ä¿®å¤æˆåŠŸ/æ€»é”™è¯¯ |
| **ä»£ç ç”Ÿæˆå‡†ç¡®ç‡** | â‰¥95% | äººå·¥è¯„å®¡ + æ‰§è¡Œæµ‹è¯• |
| **å·¥å…·æ¨èå‡†ç¡®ç‡** | â‰¥85% | ç”¨æˆ·åé¦ˆ |
| **è¾¹ç•Œåœºæ™¯é€‚é…æˆåŠŸç‡** | â‰¥85% | è¾¹ç•Œæµ‹è¯•é›† |
| **æ¨¡å‹æ¨ç†å»¶è¿Ÿ** | â‰¤100ms | æ€§èƒ½æµ‹è¯• |
| **è·¨å·¥å…·ååŒæ ¡éªŒæˆåŠŸç‡** | â‰¥95% | ååŒæµ‹è¯• |

### 9.2 å¤šç»´åº¦è¯„ä¼°ä½“ç³»ï¼ˆèåˆç”¨æˆ·æ–¹æ¡ˆï¼‰

```yaml
evaluation_dimensions:
  # ä¸šåŠ¡æŒ‡æ ‡
  business_metrics:
    - tool_adaptation_success_rate: "å·¥å…·é€‚é…æˆåŠŸç‡"
    - app_integration_efficiency: "åº”ç”¨é›†æˆæ•ˆç‡"
    - cross_tool_validation_success: "è·¨å·¥å…·ååŒæ ¡éªŒæˆåŠŸç‡"

  # æ€§èƒ½æŒ‡æ ‡
  performance_metrics:
    - validation_latency: "æ ¡éªŒå»¶è¿Ÿ"
    - qps_capacity: "QPSæ‰¿è½½èƒ½åŠ›"
    - error_handling_time: "å¼‚å¸¸å¤„ç†è€—æ—¶"

  # ç¨³å®šæ€§æŒ‡æ ‡
  stability_metrics:
    - service_availability: "æœåŠ¡å¯ç”¨æ€§ â‰¥99.9%"
    - inference_accuracy_variance: "æ¨ç†å‡†ç¡®ç‡æ³¢åŠ¨ â‰¤2%"

  # é²æ£’æ€§æŒ‡æ ‡ï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  robustness_metrics:
    - abnormal_scenario_success: "å¼‚å¸¸åœºæ™¯é€‚é…æˆåŠŸç‡"
    - boundary_case_accuracy: "è¾¹ç•Œåœºæ™¯å¤„ç†å‡†ç¡®ç‡"

  # èµ„æºæ•ˆç‡æŒ‡æ ‡ï¼ˆç”¨æˆ·æ–¹æ¡ˆäº®ç‚¹ï¼‰
  resource_efficiency_metrics:
    - gpu_training_efficiency: "å•ä½GPUèµ„æºè®­ç»ƒæ•ˆç‡"
    - model_deployment_footprint: "æ¨¡å‹éƒ¨ç½²èµ„æºå ç”¨"
```

### 8.2 åŸºå‡†æµ‹è¯•

```yaml
benchmark_suite:
  compatibility_tests:
    - æµ‹è¯•æ‰€æœ‰ framework Ã— provider Ã— tool ç»„åˆ
    - è®°å½•æˆåŠŸç‡å’Œå¤±è´¥åŸå› 

  performance_tests:
    - éƒ¨ç½²æ—¶é—´
    - è¿è¡Œæ—¶å¼€é”€
    - å†…å­˜å ç”¨

  regression_tests:
    - å·²è§£å†³é—®é¢˜ä¸å¤ç°
    - æ–°ç‰ˆæœ¬å…¼å®¹æ€§
```

---

## ä¹ã€MVP å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€èƒ½åŠ› (4-6å‘¨)

```
Week 1-2:
  âœ“ Scanner Module åŸºç¡€ç‰ˆ
  âœ“ æ”¯æŒ Python + LangChain è¯†åˆ«
  âœ“ åŸºç¡€é¡¹ç›®åˆ†æèƒ½åŠ›

Week 3-4:
  âœ“ Generator Module åŸºç¡€ç‰ˆ
  âœ“ NeMo Guardrails é›†æˆæ¨¡æ¿
  âœ“ OpenGuardrails é›†æˆæ¨¡æ¿

Week 5-6:
  âœ“ åŸºç¡€RAGçŸ¥è¯†åº“
  âœ“ ç®€å•çš„CLIç•Œé¢
  âœ“ ç«¯åˆ°ç«¯demo
```

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (6-8å‘¨)

```
Week 7-10:
  âœ“ å®Œæ•´çš„ Matcher Module
  âœ“ å…¼å®¹æ€§çŸ©é˜µæ„å»º
  âœ“ å¤šå·¥å…·æ”¯æŒ (LlamaFirewall, Guardrails AI)

Week 11-14:
  âœ“ Deployer + Validator Module
  âœ“ è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
  âœ“ åŸºç¡€è‡ªåŠ¨ä¿®å¤èƒ½åŠ›
```

### Phase 3: æ¨¡å‹è®­ç»ƒ (8-10å‘¨)

```
Week 15-18:
  âœ“ è®­ç»ƒæ•°æ®æ”¶é›†å’Œæ ‡æ³¨
  âœ“ SFTè®­ç»ƒ
  âœ“ Tool Useè®­ç»ƒ

Week 19-24:
  âœ“ DPOå¯¹é½è®­ç»ƒ
  âœ“ RAGç³»ç»Ÿä¼˜åŒ–
  âœ“ è¯„ä¼°å’Œè¿­ä»£
```

### Phase 4: äº§å“åŒ– (4-6å‘¨)

```
Week 25-30:
  âœ“ Webç•Œé¢ / VS Codeæ’ä»¶
  âœ“ ä¼ä¸šåŠŸèƒ½ (SSO, å®¡è®¡æ—¥å¿—)
  âœ“ æ–‡æ¡£å’Œæ•™ç¨‹
  âœ“ å…¬å¼€Betaå‘å¸ƒ
```

---

## åã€æ½œåœ¨æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ

| æŒ‘æˆ˜ | è§£å†³æ–¹æ¡ˆ |
|-----|---------|
| å·¥å…·æ›´æ–°é¢‘ç¹ï¼ŒçŸ¥è¯†è¿‡æ—¶ | è‡ªåŠ¨åŒ–çŸ¥è¯†åº“æ›´æ–° + ç‰ˆæœ¬è¿½è¸ª |
| ç§æœ‰/å®šåˆ¶åŒ–åº”ç”¨éš¾ä»¥æ”¯æŒ | æ’ä»¶ç³»ç»Ÿ + è‡ªå®šä¹‰é€‚é…å™¨ |
| å®‰å…¨å·¥å…·ä¹‹é—´å†²çª | å†²çªæ£€æµ‹ + äº’æ–¥è§„åˆ™ |
| éƒ¨ç½²ç¯å¢ƒå¤šæ ·æ€§ | å¤šç¯å¢ƒæµ‹è¯•çŸ©é˜µ + ç¤¾åŒºè´¡çŒ® |
| ä»£ç ç”Ÿæˆè´¨é‡ä¸ç¨³å®š | DPOä¼˜åŒ– + äººå·¥å®¡æ ¸å…œåº• |

---

## æ€»ç»“

è¿™ä¸ª Agent çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

1. **é™ä½é—¨æ§›**: è®©éå®‰å…¨ä¸“å®¶ä¹Ÿèƒ½å¿«é€Ÿéƒ¨ç½² AI å®‰å…¨é˜²æŠ¤
2. **æé«˜æ•ˆç‡**: ä»æ•°å°æ—¶/æ•°å¤©çš„é›†æˆæ—¶é—´ç¼©çŸ­åˆ°åˆ†é’Ÿçº§
3. **å‡å°‘é”™è¯¯**: é€šè¿‡è‡ªåŠ¨åŒ–é¿å…å¸¸è§çš„é…ç½®é”™è¯¯
4. **æŒç»­æ¼”è¿›**: çŸ¥è¯†åº“æŒç»­æ›´æ–°ï¼Œè·Ÿè¿›æœ€æ–°å·¥å…·å’Œæœ€ä½³å®è·µ

å¦‚éœ€è¿›ä¸€æ­¥è®¨è®ºä»»ä½•æ¨¡å—çš„è¯¦ç»†è®¾è®¡ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼
# å…­ã€å®ç°ç°çŠ¶ä¸ç¼ºå£ï¼ˆé¢å‘ V1 è½åœ°ï¼‰

> è¿™ä¸€èŠ‚å›ç­”â€œç°åœ¨ä»£ç é‡Œæœ‰å“ªäº›ã€æ•°æ®æ¥æºå’Œè®­ç»ƒæ˜¯å¦è½åœ°â€çš„é—®é¢˜ã€‚

## 6.1 å½“å‰å·²è½åœ°çš„æ¨¡å—ï¼ˆä»£ç è·¯å¾„ï¼‰

**æ ¸å¿ƒèƒ½åŠ›å±‚**
- Scannerï¼š`adapter-agent/adapter_agent/core/scanner.py`
- Matcherï¼š`adapter-agent/adapter_agent/core/matcher.py`
- Generatorï¼š`adapter-agent/adapter_agent/core/generator.py`
- Deployerï¼š`adapter-agent/adapter_agent/core/deployer.py`
- Validatorï¼š`adapter-agent/adapter_agent/core/validator.py`
- Fixerï¼š`adapter-agent/adapter_agent/core/fixer.py`
- CrossTool Orchestratorï¼š`adapter-agent/adapter_agent/core/orchestrator.py`
- Lifecycle æ§åˆ¶å™¨ï¼š`adapter-agent/adapter_agent/core/lifecycle.py`

**æ’ä»¶ä½“ç³»**
- å®‰å…¨å·¥å…·æ’ä»¶ï¼š`adapter-agent/adapter_agent/plugins/safety_tools/*`
- åº”ç”¨é›†æˆæ’ä»¶ï¼š`adapter-agent/adapter_agent/plugins/app_integrators/*`

**Pipeline**
- V0ï¼ˆOpenClaw + OpenGuardrails å¿«é€Ÿé“¾è·¯ï¼‰ï¼š`adapter-agent/adapter_agent/v0/pipeline.py`
- V1ï¼ˆé€šç”¨å¤šå·¥å…·ç®¡çº¿ï¼‰ï¼š`adapter-agent/adapter_agent/v1/pipeline.py`

## 6.2 æ•°æ®æ¥æºä¸è®­ç»ƒç°çŠ¶

**æ•°æ®æ¥æºï¼ˆè®¾è®¡å±‚é¢å·²å®šä¹‰ï¼‰**
- å®˜æ–¹æ–‡æ¡£ / API å‚è€ƒ / GitHub Issues / Discussions / é…ç½®æ¨¡æ¿ / ç¤ºä¾‹ä»£ç 
- å…¼å®¹æ€§çŸ©é˜µä¸æµ‹è¯•ç”¨ä¾‹ï¼ˆå¤šæ¡†æ¶ã€å¤šæ¨¡å‹ã€å¤šéƒ¨ç½²ï¼‰

**è®­ç»ƒç°çŠ¶ï¼ˆä»£ç å·²å…·å¤‡æœ€å°é—­ç¯ï¼‰**
- è®­ç»ƒå…¥å£ä¸è„šæœ¬ï¼š`adapter-agent/adapter_agent/training/`
- æ•°æ®æ ¼å¼è¯´æ˜ï¼š`adapter-agent/adapter_agent/training/data_formats.md`
- æœ€å°ç§å­æ•°æ®ï¼š`adapter-agent/adapter_agent/training/data/seed_sft.jsonl`ã€`seed_tool.jsonl`
- å¿«é€Ÿè®­ç»ƒæ–‡æ¡£ï¼š`adapter-agent/adapter_agent/training/README.md`

**å°šæœªæ‰“é€šçš„éƒ¨åˆ†ï¼ˆV1 éœ€è¦è¡¥é½ï¼‰**
- åœ¨çº¿æ•°æ®é‡‡é›†ï¼ˆIssues/Docs/ç¤ºä¾‹ä»“åº“ï¼‰çš„è‡ªåŠ¨åŒ–çˆ¬å–ä¸ç»“æ„åŒ–æ¸…æ´—
- è®­ç»ƒç»“æœä¸è¿è¡Œæ—¶èƒ½åŠ›çš„é—­ç¯ï¼ˆæ¨¡å‹ç‰ˆæœ¬ç®¡ç†ã€A/B è¯„æµ‹ã€ç°åº¦å‘å¸ƒï¼‰
- è·¨å·¥å…·ååŒæ ¡éªŒçš„â€œçœŸå®æ‰§è¡Œå™¨â€ï¼ˆç›®å‰æ˜¯è§„åˆ™çº§ç¼–æ’ï¼Œå°šæœªæ¥å…¥å„å·¥å…·çœŸå® APIï¼‰

## 6.3 V1 ä¸‹ä¸€æ­¥å®ç°æ¸…å•ï¼ˆå»ºè®®ä¼˜å…ˆçº§ï¼‰

1) **æ’ä»¶æ‰§è¡Œå™¨**ï¼šæŠŠå®‰å…¨å·¥å…·æ’ä»¶çœŸæ­£æ¥å…¥å„å·¥å…· APIï¼ˆOpenGuardrails/NeMo/LlamaFirewallï¼‰
2) **é›†æˆç‚¹è½åœ°**ï¼šé’ˆå¯¹ `PRE_PROMPT / PRE_TOOL_CALL / POST_RESULT` ç”Ÿæˆä¸­é—´ä»¶æˆ– wrapper
3) **å¤šå·¥å…·ååŒè§„åˆ™**ï¼šæŠŠç¼–æ’ç­–ç•¥ä»â€œé¡ºåºæ‰§è¡Œâ€å‡çº§ä¸ºâ€œèåˆç­–ç•¥ï¼ˆall/any/majorityï¼‰â€
4) **éªŒè¯ä¸ä¿®å¤è”åŠ¨**ï¼šValidator å¤±è´¥è‡ªåŠ¨è§¦å‘ Fixer çš„ä¿®å¤åŠ¨ä½œ
5) **æ•°æ®é—­ç¯**ï¼šæŠŠç”Ÿäº§éªŒè¯æ—¥å¿—å†™å…¥è®­ç»ƒæ•°æ®æ± ï¼ˆå½¢æˆå†è®­ç»ƒä¸å›å½’ï¼‰
